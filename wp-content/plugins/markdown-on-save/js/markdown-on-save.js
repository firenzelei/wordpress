// Generated by CoffeeScript 1.4.0
(function(){(function(e){var t;t=window.markdownOnSaveApp={on:function(){var t,n,r,i,s;e("body").addClass("cws-markdown");this.html.click();this.checkbox.attr("checked",!0);this.buttonOn.show();i=[this.buttonOff,this.html,this.visual,this.htmlButtons];s=[];for(n=0,r=i.length;n<r;n++){t=i[n];s.push(t.hide())}return s},off:function(){var t,n,r,i,s;e("body").removeClass("cws-markdown");this.checkbox.attr("checked",!1);this.buttonOn.hide();i=[this.buttonOff,this.html,this.visual,this.htmlButtons];s=[];for(n=0,r=i.length;n<r;n++){t=i[n];s.push(t.show())}return s},delay:function(e,t){return setTimeout(t,e)},start:function(){var t,n;n=e("#cws-markdown");n.detach().insertBefore("#submitdiv h3 span").show();this.buttonOn=e("img.markdown-on",n);this.buttonOff=e("img.markdown-off",n);this.checkbox=e("#cws_using_markdown");this.html=e("#content-html");this.visual=e("#content-tmce");this.htmlButtonsString=function(){var e,n,r,i;r=["strong","em","link","block","del","ins","img","ul","ol","li","code","close"];i=[];for(e=0,n=r.length;e<n;e++){t=r[e];i.push("#qt_content_"+t)}return i}().join(", ");this.htmlButtons=e(this.htmlButtonsString);this.events();return this.setFromCheckbox()},setFromCheckbox:function(){return t.checkbox.is(":checked")?t.on():t.off()},events:function(){e([this.buttonOn,this.buttonOff]).each(function(){return e(this).click(function(e){e.stopPropagation();return t.checkbox.click()})});return this.checkbox.change(this.setFromCheckbox)}};return e(function(){return t.delay(0,function(){return t.start()})})})(jQuery)}).call(this);